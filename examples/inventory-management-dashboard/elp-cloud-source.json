{
  "projectName": "elp-cloud-inventory-management",
  "version": "2.0.0",
  "description": "ELP Cloud - Logistics Management System",
  "generatedAt": "2026-01-11T10:21:31.274Z",
  "files": {
    "index.html": "<!DOCTYPE html>\n<html lang=\"ru\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/vite.svg\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <meta name=\"description\" content=\"ELP Cloud - Система управления логистикой\" />\n    <title>ELP Cloud | Logistics Management System</title>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n    <script type=\"module\" src=\"/src/main.tsx\"></script>\n  </body>\n</html>\n",
    "package.json": "{\n  \"name\": \"elp-cloud-inventory-management\",\n  \"private\": true,\n  \"version\": \"2.0.0\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"tsc && vite build\",\n    \"lint\": \"eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0\",\n    \"preview\": \"vite preview\",\n    \"typecheck\": \"tsc --noEmit\"\n  },\n  \"dependencies\": {\n    \"react\": \"^18.2.0\",\n    \"react-dom\": \"^18.2.0\",\n    \"lucide-react\": \"^0.294.0\",\n    \"recharts\": \"^2.10.3\",\n    \"clsx\": \"^2.0.0\",\n    \"date-fns\": \"^3.0.6\"\n  },\n  \"devDependencies\": {\n    \"@types/react\": \"^18.2.43\",\n    \"@types/react-dom\": \"^18.2.17\",\n    \"@typescript-eslint/eslint-plugin\": \"^6.14.0\",\n    \"@typescript-eslint/parser\": \"^6.14.0\",\n    \"@vitejs/plugin-react\": \"^4.2.1\",\n    \"autoprefixer\": \"^10.4.16\",\n    \"eslint\": \"^8.55.0\",\n    \"eslint-plugin-react-hooks\": \"^4.6.0\",\n    \"eslint-plugin-react-refresh\": \"^0.4.5\",\n    \"postcss\": \"^8.4.32\",\n    \"tailwindcss\": \"^3.3.6\",\n    \"typescript\": \"^5.3.3\",\n    \"vite\": \"^5.0.8\"\n  }\n}\n",
    "postcss.config.js": "export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n};\n",
    "src/App.tsx": "import React, { useState, useCallback } from 'react';\nimport { Loader2 } from 'lucide-react';\n\n// Layout\nimport { Header } from './components/layout/Header';\nimport { Footer } from './components/layout/Footer';\n\n// Features\nimport { DatabaseView } from './components/features/database';\nimport { CalculatorView } from './components/features/calculator';\nimport { AnalyticsView } from './components/features/analytics';\n\n// UI\nimport { ToastContainer } from './components/ui/Toast';\n\n// Hooks\nimport { useRates, useCalculator, useToast, useLocalStorage } from './hooks';\n\n// Constants & Types\nimport { DEFAULT_SETTINGS, SETTINGS_KEY } from './constants';\nimport type { TabType, AppSettings, RateFormData, Rate } from './types';\n\nconst App: React.FC = () => {\n  // App state\n  const [activeTab, setActiveTab] = useState<TabType>('database');\n  const [settings, setSettings] = useLocalStorage<AppSettings>(SETTINGS_KEY, DEFAULT_SETTINGS);\n  const [isInitializing, setIsInitializing] = useState(true);\n\n  // Initialize after a short delay (simulating data load)\n  React.useEffect(() => {\n    const timer = setTimeout(() => setIsInitializing(false), 500);\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Toast notifications\n  const toast = useToast();\n\n  // Rates management\n  const {\n    rates,\n    filteredRates,\n    sort,\n    toggleSort,\n    setSearchTerm,\n    addRate,\n    updateRate,\n    deleteRate,\n    importRates,\n    clearAllRates,\n    totalCount,\n  } = useRates();\n\n  // Calculator\n  const {\n    selectedRate,\n    weight,\n    result,\n    history,\n    selectRate,\n    updateWeight,\n    saveToHistory,\n    removeFromHistory,\n    clearAllHistory,\n  } = useCalculator(settings);\n\n  // Settings update handler\n  const handleSettingsChange = useCallback((updates: Partial<AppSettings>) => {\n    setSettings(prev => ({ ...prev, ...updates }));\n  }, [setSettings]);\n\n  // Add rate handler\n  const handleAddRate = useCallback((data: RateFormData) => {\n    return addRate(data);\n  }, [addRate]);\n\n  // Update rate handler\n  const handleUpdateRate = useCallback((id: string, data: Partial<Rate>) => {\n    return updateRate(id, data);\n  }, [updateRate]);\n\n  // Save to history handler\n  const handleSaveToHistory = useCallback(() => {\n    const saved = saveToHistory();\n    if (saved) {\n      toast.success('Расчет сохранен в историю');\n    }\n  }, [saveToHistory, toast]);\n\n  // Loading screen\n  if (isInitializing) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex flex-col items-center justify-center text-slate-400\">\n        <Loader2 className=\"animate-spin mb-4 text-blue-500\" size={56} />\n        <p className=\"font-bold uppercase tracking-widest text-sm\">Загрузка ELP Cloud...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex flex-col font-sans\">\n      {/* Navigation */}\n      <Header activeTab={activeTab} onTabChange={setActiveTab} />\n\n      {/* Main Content */}\n      <main className=\"flex-1 max-w-7xl mx-auto w-full p-4 md:p-6 lg:p-8\">\n        {activeTab === 'database' && (\n          <DatabaseView\n            rates={rates}\n            filteredRates={filteredRates}\n            sort={sort}\n            onSort={toggleSort}\n            onAdd={handleAddRate}\n            onUpdate={handleUpdateRate}\n            onDelete={deleteRate}\n            onImport={importRates}\n            onClearAll={clearAllRates}\n            onSearchChange={setSearchTerm}\n            settings={settings}\n            onSettingsChange={handleSettingsChange}\n            onSuccess={toast.success}\n            onError={toast.error}\n          />\n        )}\n\n        {activeTab === 'calculator' && (\n          <CalculatorView\n            rates={rates}\n            selectedRate={selectedRate}\n            weight={weight}\n            result={result}\n            history={history}\n            settings={settings}\n            onSelectRate={selectRate}\n            onWeightChange={updateWeight}\n            onSaveToHistory={handleSaveToHistory}\n            onRemoveFromHistory={removeFromHistory}\n            onClearHistory={clearAllHistory}\n          />\n        )}\n\n        {activeTab === 'analytics' && (\n          <AnalyticsView rates={rates} />\n        )}\n      </main>\n\n      {/* Footer */}\n      <Footer totalRecords={totalCount} />\n\n      {/* Toast Notifications */}\n      <ToastContainer toasts={toast.toasts} onDismiss={toast.removeToast} />\n    </div>\n  );\n};\n\nexport default App;\n",
    "src/components/features/analytics/AnalyticsView.tsx": "import React, { useMemo } from 'react';\nimport {\n  BarChart3,\n  TrendingUp,\n  Package,\n  Route,\n  CreditCard,\n  DollarSign,\n} from 'lucide-react';\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  PieChart,\n  Pie,\n  Cell,\n  Legend,\n} from 'recharts';\nimport { calculateAnalytics, cn } from '../../../utils';\nimport type { Rate } from '../../../types';\n\ninterface AnalyticsViewProps {\n  rates: Rate[];\n}\n\nconst COLORS = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899'];\n\ninterface StatCardProps {\n  title: string;\n  value: string | number;\n  subtitle?: string;\n  icon: React.ReactNode;\n  color: string;\n}\n\nconst StatCard: React.FC<StatCardProps> = ({ title, value, subtitle, icon, color }) => (\n  <div className=\"bg-white p-6 rounded-2xl shadow-lg border-2 border-gray-100\">\n    <div className=\"flex items-start justify-between\">\n      <div>\n        <p className=\"text-xs font-bold text-gray-500 uppercase tracking-wide mb-1\">{title}</p>\n        <p className={cn('text-3xl font-black', color)}>{value}</p>\n        {subtitle && <p className=\"text-xs text-gray-400 mt-1\">{subtitle}</p>}\n      </div>\n      <div className={cn('p-3 rounded-xl', color.replace('text-', 'bg-').replace('-600', '-100'))}>\n        {icon}\n      </div>\n    </div>\n  </div>\n);\n\nexport const AnalyticsView: React.FC<AnalyticsViewProps> = ({ rates }) => {\n  const analytics = useMemo(() => calculateAnalytics(rates), [rates]);\n\n  const paymentTypeData = useMemo(() => [\n    { name: 'Наличный', value: analytics.ratesByPaymentType['Нал'] || 0 },\n    { name: 'Безналичный', value: analytics.ratesByPaymentType['Безнал'] || 0 },\n  ], [analytics]);\n\n  const currencyData = useMemo(() => [\n    { name: 'EUR', value: analytics.ratesByCurrency['EUR'] || 0 },\n    { name: 'USD', value: analytics.ratesByCurrency['USD'] || 0 },\n  ], [analytics]);\n\n  if (rates.length === 0) {\n    return (\n      <div\n        className=\"max-w-4xl mx-auto\"\n        role=\"tabpanel\"\n        id=\"analytics-panel\"\n        aria-labelledby=\"analytics-tab\"\n      >\n        <div className=\"bg-white p-16 rounded-3xl shadow-xl border-2 border-gray-200 text-center\">\n          <BarChart3 className=\"mx-auto mb-4 text-gray-300\" size={64} />\n          <p className=\"text-xl text-slate-400 font-bold\">Нет данных для анализа</p>\n          <p className=\"text-sm text-slate-300 mt-2\">\n            Добавьте записи в базу данных для просмотра аналитики\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className=\"max-w-6xl mx-auto space-y-6\"\n      role=\"tabpanel\"\n      id=\"analytics-panel\"\n      aria-labelledby=\"analytics-tab\"\n    >\n      {/* Header */}\n      <div className=\"flex items-center gap-3 mb-2\">\n        <div className=\"p-3 bg-blue-100 rounded-xl\">\n          <BarChart3 className=\"text-blue-600\" size={28} />\n        </div>\n        <h2 className=\"text-2xl font-black text-slate-800\">Аналитика и статистика</h2>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n        <StatCard\n          title=\"Всего записей\"\n          value={analytics.totalRates}\n          icon={<Package size={24} className=\"text-blue-600\" />}\n          color=\"text-blue-600\"\n        />\n        <StatCard\n          title=\"Средняя ставка\"\n          value={`${analytics.avgRate.toFixed(2)} €`}\n          icon={<TrendingUp size={24} className=\"text-green-600\" />}\n          color=\"text-green-600\"\n        />\n        <StatCard\n          title=\"Уникальных маршрутов\"\n          value={analytics.totalRoutes}\n          icon={<Route size={24} className=\"text-purple-600\" />}\n          color=\"text-purple-600\"\n        />\n        <StatCard\n          title=\"Наличных / Безнал\"\n          value={`${analytics.ratesByPaymentType['Нал'] || 0} / ${analytics.ratesByPaymentType['Безнал'] || 0}`}\n          icon={<CreditCard size={24} className=\"text-orange-600\" />}\n          color=\"text-orange-600\"\n        />\n      </div>\n\n      {/* Charts Row */}\n      <div className=\"grid lg:grid-cols-2 gap-6\">\n        {/* Payment Type Distribution */}\n        <div className=\"bg-white p-6 rounded-2xl shadow-lg border-2 border-gray-100\">\n          <h3 className=\"text-sm font-bold text-gray-500 uppercase tracking-wide mb-4\">\n            Распределение по типу оплаты\n          </h3>\n          <div className=\"h-64\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <PieChart>\n                <Pie\n                  data={paymentTypeData}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  innerRadius={60}\n                  outerRadius={100}\n                  paddingAngle={5}\n                  dataKey=\"value\"\n                  label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}\n                >\n                  {paymentTypeData.map((_, index) => (\n                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                  ))}\n                </Pie>\n                <Tooltip />\n              </PieChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n\n        {/* Currency Distribution */}\n        <div className=\"bg-white p-6 rounded-2xl shadow-lg border-2 border-gray-100\">\n          <h3 className=\"text-sm font-bold text-gray-500 uppercase tracking-wide mb-4\">\n            Распределение по валюте\n          </h3>\n          <div className=\"h-64\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <PieChart>\n                <Pie\n                  data={currencyData}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  innerRadius={60}\n                  outerRadius={100}\n                  paddingAngle={5}\n                  dataKey=\"value\"\n                  label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}\n                >\n                  {currencyData.map((_, index) => (\n                    <Cell key={`cell-${index}`} fill={COLORS[(index + 2) % COLORS.length]} />\n                  ))}\n                </Pie>\n                <Tooltip />\n              </PieChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n      </div>\n\n      {/* Monthly Chart */}\n      {analytics.ratesByMonth.length > 1 && (\n        <div className=\"bg-white p-6 rounded-2xl shadow-lg border-2 border-gray-100\">\n          <h3 className=\"text-sm font-bold text-gray-500 uppercase tracking-wide mb-4\">\n            Активность по месяцам\n          </h3>\n          <div className=\"h-72\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <BarChart data={analytics.ratesByMonth}>\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#E5E7EB\" />\n                <XAxis dataKey=\"month\" tick={{ fontSize: 12 }} />\n                <YAxis tick={{ fontSize: 12 }} />\n                <Tooltip\n                  contentStyle={{\n                    backgroundColor: '#1E293B',\n                    border: 'none',\n                    borderRadius: '12px',\n                    color: '#fff',\n                  }}\n                />\n                <Bar dataKey=\"count\" fill=\"#3B82F6\" radius={[8, 8, 0, 0]} name=\"Количество\" />\n              </BarChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n      )}\n\n      {/* Top Routes */}\n      {analytics.topRoutes.length > 0 && (\n        <div className=\"bg-white p-6 rounded-2xl shadow-lg border-2 border-gray-100\">\n          <h3 className=\"text-sm font-bold text-gray-500 uppercase tracking-wide mb-4\">\n            Популярные маршруты\n          </h3>\n          <div className=\"space-y-3\">\n            {analytics.topRoutes.map((route, index) => (\n              <div key={route.route} className=\"flex items-center gap-4\">\n                <div\n                  className={cn(\n                    'w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm',\n                    index === 0\n                      ? 'bg-yellow-100 text-yellow-700'\n                      : index === 1\n                      ? 'bg-gray-200 text-gray-700'\n                      : index === 2\n                      ? 'bg-orange-100 text-orange-700'\n                      : 'bg-blue-50 text-blue-600'\n                  )}\n                >\n                  {index + 1}\n                </div>\n                <div className=\"flex-1\">\n                  <p className=\"font-semibold text-slate-800\">{route.route || 'Без маршрута'}</p>\n                  <div className=\"h-2 bg-gray-100 rounded-full mt-1 overflow-hidden\">\n                    <div\n                      className=\"h-full bg-blue-500 rounded-full transition-all\"\n                      style={{\n                        width: `${(route.count / analytics.topRoutes[0].count) * 100}%`,\n                      }}\n                    />\n                  </div>\n                </div>\n                <span className=\"font-bold text-blue-600\">{route.count}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n",
    "src/components/features/analytics/index.ts": "export { AnalyticsView } from './AnalyticsView';\n",
    "src/components/features/calculator/CalculatorView.tsx": "import React from 'react';\nimport { Calculator, Package, History, Trash2, Clock } from 'lucide-react';\nimport { Select } from '../../ui/Select';\nimport { Input } from '../../ui/Input';\nimport { Button } from '../../ui/Button';\nimport { formatCurrency, formatRub, formatDateTime, cn } from '../../../utils';\nimport type { Rate, CalculationResult, CalculationHistory, AppSettings } from '../../../types';\n\ninterface CalculatorViewProps {\n  rates: Rate[];\n  selectedRate: Rate | null;\n  weight: string;\n  result: CalculationResult | null;\n  history: CalculationHistory[];\n  settings: AppSettings;\n  onSelectRate: (rate: Rate | null) => void;\n  onWeightChange: (weight: string) => void;\n  onSaveToHistory: () => void;\n  onRemoveFromHistory: (id: string) => void;\n  onClearHistory: () => void;\n}\n\nexport const CalculatorView: React.FC<CalculatorViewProps> = ({\n  rates,\n  selectedRate,\n  weight,\n  result,\n  history,\n  settings,\n  onSelectRate,\n  onWeightChange,\n  onSaveToHistory,\n  onRemoveFromHistory,\n  onClearHistory,\n}) => {\n  const rateOptions = rates.map(r => ({\n    value: r.id,\n    label: `${r.item} • ${r.route || 'Без маршрута'} • ${r.rate} ${r.currency}${r.unit === 'кг' ? '/кг' : ''}`,\n  }));\n\n  const handleRateSelect = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const rate = rates.find(r => r.id === e.target.value) || null;\n    onSelectRate(rate);\n  };\n\n  return (\n    <div\n      className=\"max-w-4xl mx-auto space-y-6\"\n      role=\"tabpanel\"\n      id=\"calculator-panel\"\n      aria-labelledby=\"calculator-tab\"\n    >\n      {/* Main Calculator */}\n      <div className=\"bg-white p-8 md:p-10 rounded-3xl shadow-2xl border-2 border-blue-100\">\n        <h2 className=\"text-3xl font-black mb-8 flex items-center gap-3 text-slate-800\">\n          <div className=\"p-3 bg-blue-100 rounded-xl\">\n            <Calculator className=\"text-blue-600\" size={32} />\n          </div>\n          Калькулятор стоимости\n        </h2>\n\n        <div className=\"space-y-8\">\n          {/* Rate Selection */}\n          <Select\n            label=\"Выберите груз из базы данных\"\n            options={rateOptions}\n            value={selectedRate?.id || ''}\n            onChange={handleRateSelect}\n            placeholder=\"-- Выберите товар и маршрут --\"\n            className=\"py-5 text-lg font-bold\"\n          />\n\n          {/* Weight Input */}\n          <Input\n            label=\"Вес груза (кг)\"\n            type=\"text\"\n            inputMode=\"decimal\"\n            placeholder=\"Введите вес в килограммах\"\n            value={weight}\n            onChange={e => onWeightChange(e.target.value)}\n            leftIcon={<Package size={24} />}\n            className=\"py-5 text-xl font-bold\"\n          />\n\n          {/* Result */}\n          {result ? (\n            <div className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white rounded-3xl p-8 space-y-6 shadow-2xl relative overflow-hidden\">\n              {/* Decorative background */}\n              <div className=\"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl\" aria-hidden=\"true\" />\n              <div className=\"absolute bottom-0 left-0 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl\" aria-hidden=\"true\" />\n\n              <div className=\"relative\">\n                <div className=\"flex justify-between items-center mb-4\">\n                  <h3 className=\"text-sm font-black text-blue-400 uppercase tracking-widest\">\n                    Детальный расчет\n                  </h3>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={onSaveToHistory}\n                    className=\"text-blue-400 hover:text-blue-300 hover:bg-blue-900/50\"\n                  >\n                    <History size={16} className=\"mr-1\" />\n                    Сохранить\n                  </Button>\n                </div>\n\n                <div className=\"space-y-4\">\n                  {/* Base calculation */}\n                  <div className=\"flex justify-between items-center text-base border-b border-slate-700 pb-4\">\n                    <span className=\"text-slate-400 font-semibold\">\n                      База iCar ({result.rate.unit === 'фикс' ? 'фикс' : `${weight}кг × ${result.rate.rate}€`}):\n                    </span>\n                    <span className=\"font-black text-xl\">\n                      {formatCurrency(result.base, result.rate.currency)}\n                    </span>\n                  </div>\n\n                  {/* ELP Margin */}\n                  <div className=\"flex justify-between items-center bg-blue-900/30 p-4 rounded-xl\">\n                    <span className=\"text-blue-300 font-bold\">\n                      Наценка ELP ({weight}кг × {settings.elpMarginPerKg}€):\n                    </span>\n                    <span className=\"text-2xl font-black text-blue-400\">\n                      +{formatCurrency(result.margin, 'EUR')}\n                    </span>\n                  </div>\n\n                  {/* Final prices */}\n                  <div className=\"pt-6 border-t-2 border-slate-700\">\n                    <div className=\"grid grid-cols-2 gap-6\">\n                      <div className=\"bg-slate-800/50 p-6 rounded-2xl\">\n                        <p className=\"text-[10px] text-slate-400 font-black uppercase tracking-wider mb-2\">\n                          Клиент (Нал)\n                        </p>\n                        <p className=\"text-4xl md:text-5xl font-black text-white\">\n                          {result.total.toFixed(0)}\n                        </p>\n                        <p className=\"text-blue-400 font-bold mt-1\">{result.rate.currency}</p>\n                      </div>\n                      <div className=\"bg-slate-800/50 p-6 rounded-2xl\">\n                        <p className=\"text-[10px] text-slate-400 font-black uppercase tracking-wider mb-2\">\n                          В рублях\n                        </p>\n                        <p className=\"text-4xl md:text-5xl font-black text-green-400\">\n                          {formatRub(result.rub).replace(' ₽', '')}\n                        </p>\n                        <p className=\"text-green-300 font-bold mt-1\">RUB</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Beznal price */}\n                  <div className=\"bg-slate-800/70 backdrop-blur p-5 rounded-2xl flex justify-between items-center border border-slate-700\">\n                    <div>\n                      <p className=\"text-[9px] text-slate-400 font-black uppercase tracking-widest mb-1\">\n                        Безналичный расчет\n                      </p>\n                      <p className=\"text-xs text-slate-500 italic\">\n                        Цена + {((settings.beznalMarkup - 1) * 100).toFixed(0)}%\n                      </p>\n                    </div>\n                    <div className=\"text-right\">\n                      <p className=\"text-3xl font-black text-blue-300\">\n                        {result.beznal.toFixed(0)}\n                      </p>\n                      <p className=\"text-blue-400 text-sm font-bold\">{result.rate.currency}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"text-center py-12 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-300\">\n              <Calculator className=\"mx-auto mb-4 text-gray-300\" size={64} aria-hidden=\"true\" />\n              <p className=\"text-gray-400 font-bold text-lg\">\n                {selectedRate ? 'Введите вес для расчета' : 'Выберите груз для расчета'}\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* History */}\n      {history.length > 0 && (\n        <div className=\"bg-white p-6 rounded-2xl shadow-xl border-2 border-gray-200\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className=\"text-lg font-bold flex items-center gap-2\">\n              <History size={20} className=\"text-blue-500\" />\n              История расчетов\n            </h3>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={onClearHistory}\n              className=\"text-red-500 hover:text-red-700 hover:bg-red-50\"\n            >\n              <Trash2 size={14} className=\"mr-1\" />\n              Очистить\n            </Button>\n          </div>\n          <div className=\"space-y-3 max-h-80 overflow-y-auto\">\n            {history.map(item => (\n              <div\n                key={item.id}\n                className=\"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition group\"\n              >\n                <div className=\"flex-1\">\n                  <p className=\"font-bold text-slate-800\">{item.result.rate.item}</p>\n                  <p className=\"text-xs text-gray-500\">\n                    {item.result.weight}кг • {formatCurrency(item.result.total, item.result.rate.currency)} • {formatRub(item.result.rub)}\n                  </p>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"text-[10px] text-gray-400 flex items-center gap-1\">\n                    <Clock size={12} />\n                    {formatDateTime(item.timestamp)}\n                  </span>\n                  <button\n                    onClick={() => onRemoveFromHistory(item.id)}\n                    className=\"opacity-0 group-hover:opacity-100 p-1 text-gray-400 hover:text-red-500 transition\"\n                    aria-label=\"Удалить из истории\"\n                  >\n                    <Trash2 size={14} />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n",
    "src/components/features/calculator/index.ts": "export { CalculatorView } from './CalculatorView';\n",
    "src/components/features/database/DatabaseView.tsx": "import React, { useState, useCallback, useMemo } from 'react';\nimport { Search, Plus, Cloud, Download, Upload, Trash2 } from 'lucide-react';\nimport { RateTable } from './RateTable';\nimport { RateForm } from './RateForm';\nimport { Button } from '../../ui/Button';\nimport { Input } from '../../ui/Input';\nimport { ConfirmDialog } from '../../ui/ConfirmDialog';\nimport { debounce, exportToJSON, exportToCSV, downloadFile, importFromJSON } from '../../../utils';\nimport { EXCHANGE_RATE_RANGE, DEFAULT_SETTINGS } from '../../../constants';\nimport type { Rate, RateFormData, SortConfig, SortField, AppSettings } from '../../../types';\n\ninterface DatabaseViewProps {\n  rates: Rate[];\n  filteredRates: Rate[];\n  sort: SortConfig;\n  onSort: (field: SortField) => void;\n  onAdd: (data: RateFormData) => { success: boolean; errors: string[] };\n  onUpdate: (id: string, data: Partial<Rate>) => { success: boolean; errors: string[] };\n  onDelete: (id: string) => boolean;\n  onImport: (rates: Rate[], replace: boolean) => number;\n  onClearAll: () => void;\n  onSearchChange: (term: string) => void;\n  settings: AppSettings;\n  onSettingsChange: (settings: Partial<AppSettings>) => void;\n  onSuccess: (message: string) => void;\n  onError: (message: string) => void;\n}\n\nexport const DatabaseView: React.FC<DatabaseViewProps> = ({\n  rates,\n  filteredRates,\n  sort,\n  onSort,\n  onAdd,\n  onUpdate,\n  onDelete,\n  onImport,\n  onClearAll,\n  onSearchChange,\n  settings,\n  onSettingsChange,\n  onSuccess,\n  onError,\n}) => {\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [editingRate, setEditingRate] = useState<Rate | null>(null);\n  const [deleteConfirm, setDeleteConfirm] = useState<string | null>(null);\n  const [clearConfirm, setClearConfirm] = useState(false);\n  const [searchInput, setSearchInput] = useState('');\n\n  // Debounced search\n  const debouncedSearch = useMemo(\n    () => debounce((term: string) => onSearchChange(term), 300),\n    [onSearchChange]\n  );\n\n  const handleSearchChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setSearchInput(value);\n    debouncedSearch(value);\n  }, [debouncedSearch]);\n\n  const handleAddSubmit = useCallback((data: RateFormData) => {\n    const result = onAdd(data);\n    if (result.success) {\n      onSuccess('Запись успешно добавлена');\n    }\n    return result;\n  }, [onAdd, onSuccess]);\n\n  const handleEditSubmit = useCallback((data: RateFormData) => {\n    if (!editingRate) return { success: false, errors: ['Ошибка'] };\n    const result = onUpdate(editingRate.id, data);\n    if (result.success) {\n      onSuccess('Запись успешно обновлена');\n    }\n    return result;\n  }, [editingRate, onUpdate, onSuccess]);\n\n  const handleDeleteConfirm = useCallback(() => {\n    if (deleteConfirm) {\n      const success = onDelete(deleteConfirm);\n      if (success) {\n        onSuccess('Запись удалена');\n      } else {\n        onError('Не удалось удалить запись');\n      }\n      setDeleteConfirm(null);\n    }\n  }, [deleteConfirm, onDelete, onSuccess, onError]);\n\n  const handleClearConfirm = useCallback(() => {\n    onClearAll();\n    onSuccess('База данных очищена');\n    setClearConfirm(false);\n  }, [onClearAll, onSuccess]);\n\n  const handleExportJSON = useCallback(() => {\n    const json = exportToJSON(rates, settings);\n    downloadFile(json, `elp-backup-${new Date().toISOString().split('T')[0]}.json`);\n    onSuccess('Данные экспортированы в JSON');\n  }, [rates, settings, onSuccess]);\n\n  const handleExportCSV = useCallback(() => {\n    const csv = exportToCSV(rates);\n    downloadFile(csv, `elp-rates-${new Date().toISOString().split('T')[0]}.csv`, 'text/csv');\n    onSuccess('Данные экспортированы в CSV');\n  }, [rates, onSuccess]);\n\n  const handleImport = useCallback(() => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.json';\n    input.onchange = async (e) => {\n      const file = (e.target as HTMLInputElement).files?.[0];\n      if (!file) return;\n\n      try {\n        const text = await file.text();\n        const data = importFromJSON(text);\n        if (!data) {\n          onError('Неверный формат файла');\n          return;\n        }\n        const count = onImport(data.rates, false);\n        onSuccess(`Импортировано ${count} записей`);\n      } catch {\n        onError('Ошибка при чтении файла');\n      }\n    };\n    input.click();\n  }, [onImport, onSuccess, onError]);\n\n  return (\n    <div className=\"space-y-5\" role=\"tabpanel\" id=\"database-panel\" aria-labelledby=\"database-tab\">\n      {/* Search & Controls */}\n      <div className=\"flex flex-col lg:flex-row gap-4 items-stretch\">\n        <div className=\"relative flex-1\">\n          <Input\n            placeholder=\"Поиск по товарам, маршрутам, примечаниям...\"\n            value={searchInput}\n            onChange={handleSearchChange}\n            leftIcon={<Search size={22} />}\n            className=\"py-4 text-lg\"\n            aria-label=\"Поиск\"\n          />\n        </div>\n        <div className=\"flex items-center gap-4 bg-white p-3 px-5 rounded-2xl border-2 border-gray-200 shadow-lg\">\n          <div className=\"flex-1 lg:flex-none\">\n            <p className=\"text-[11px] text-gray-500 font-bold uppercase mb-1\">Курс EUR/RUB</p>\n            <div className=\"flex items-center gap-3\">\n              <input\n                type=\"range\"\n                min={EXCHANGE_RATE_RANGE.min}\n                max={EXCHANGE_RATE_RANGE.max}\n                step={EXCHANGE_RATE_RANGE.step}\n                value={settings.exchangeRate}\n                onChange={e => onSettingsChange({ exchangeRate: parseFloat(e.target.value) })}\n                className=\"w-full lg:w-40 h-2.5 bg-gray-200 rounded-full appearance-none cursor-pointer accent-blue-600\"\n                aria-label=\"Курс EUR/RUB\"\n              />\n              <span className=\"text-xl font-black text-blue-600 min-w-[60px]\">\n                {settings.exchangeRate}₽\n              </span>\n            </div>\n          </div>\n          <div className=\"h-12 w-[2px] bg-gray-200 hidden lg:block\" aria-hidden=\"true\" />\n          <Button onClick={() => setShowAddModal(true)} leftIcon={<Plus size={20} />}>\n            <span className=\"hidden sm:inline\">Добавить</span>\n          </Button>\n        </div>\n      </div>\n\n      {/* Status Bar */}\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 px-2\">\n        <div className=\"flex items-center gap-2 text-[11px] font-bold uppercase tracking-wide text-slate-500\">\n          <Cloud size={14} className=\"text-green-500\" aria-hidden=\"true\" />\n          <span>Данные актуальны • {rates.length} записей в базе</span>\n        </div>\n        <div className=\"flex flex-wrap gap-2\">\n          <div className=\"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-[11px] font-bold uppercase\">\n            Найдено: {filteredRates.length}\n          </div>\n          <button\n            onClick={handleExportJSON}\n            className=\"px-3 py-1.5 bg-green-50 text-green-700 rounded-lg text-[11px] font-bold uppercase hover:bg-green-100 transition flex items-center gap-1\"\n          >\n            <Download size={12} /> JSON\n          </button>\n          <button\n            onClick={handleExportCSV}\n            className=\"px-3 py-1.5 bg-green-50 text-green-700 rounded-lg text-[11px] font-bold uppercase hover:bg-green-100 transition flex items-center gap-1\"\n          >\n            <Download size={12} /> CSV\n          </button>\n          <button\n            onClick={handleImport}\n            className=\"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-[11px] font-bold uppercase hover:bg-blue-100 transition flex items-center gap-1\"\n          >\n            <Upload size={12} /> Импорт\n          </button>\n          <button\n            onClick={() => setClearConfirm(true)}\n            className=\"px-3 py-1.5 bg-red-50 text-red-600 rounded-lg text-[11px] font-bold uppercase hover:bg-red-100 transition flex items-center gap-1\"\n          >\n            <Trash2 size={12} /> Очистить\n          </button>\n        </div>\n      </div>\n\n      {/* Table */}\n      <div className=\"bg-white rounded-2xl shadow-xl border-2 border-gray-200 overflow-hidden\">\n        <RateTable\n          rates={filteredRates}\n          sort={sort}\n          onSort={onSort}\n          onEdit={setEditingRate}\n          onDelete={setDeleteConfirm}\n        />\n      </div>\n\n      {/* Add Modal */}\n      <RateForm\n        isOpen={showAddModal}\n        onClose={() => setShowAddModal(false)}\n        onSubmit={handleAddSubmit}\n      />\n\n      {/* Edit Modal */}\n      <RateForm\n        isOpen={!!editingRate}\n        onClose={() => setEditingRate(null)}\n        onSubmit={handleEditSubmit}\n        editingRate={editingRate}\n      />\n\n      {/* Delete Confirmation */}\n      <ConfirmDialog\n        isOpen={!!deleteConfirm}\n        onConfirm={handleDeleteConfirm}\n        onCancel={() => setDeleteConfirm(null)}\n        title=\"Удалить запись?\"\n        message=\"Это действие нельзя отменить. Запись будет удалена из базы данных.\"\n        confirmText=\"Удалить\"\n        variant=\"danger\"\n      />\n\n      {/* Clear All Confirmation */}\n      <ConfirmDialog\n        isOpen={clearConfirm}\n        onConfirm={handleClearConfirm}\n        onCancel={() => setClearConfirm(false)}\n        title=\"Очистить базу данных?\"\n        message=\"Все записи будут удалены. Это действие нельзя отменить!\"\n        confirmText=\"Очистить всё\"\n        variant=\"danger\"\n      />\n    </div>\n  );\n};\n",
    "src/components/features/database/RateForm.tsx": "import React, { useState, useEffect } from 'react';\nimport { Cloud, Plus, Save } from 'lucide-react';\nimport { Modal } from '../../ui/Modal';\nimport { Input } from '../../ui/Input';\nimport { Select } from '../../ui/Select';\nimport { Button } from '../../ui/Button';\nimport {\n  CURRENCY_OPTIONS,\n  PAYMENT_TYPE_OPTIONS,\n  UNIT_OPTIONS,\n} from '../../../constants';\nimport type { Rate, RateFormData } from '../../../types';\n\ninterface RateFormProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (data: RateFormData) => { success: boolean; errors: string[] };\n  editingRate?: Rate | null;\n  onSuccess?: () => void;\n}\n\nconst initialFormData: RateFormData = {\n  item: '',\n  route: '',\n  rate: 0,\n  unit: 'кг',\n  currency: 'EUR',\n  type: 'Нал',\n  notes: '',\n};\n\nexport const RateForm: React.FC<RateFormProps> = ({\n  isOpen,\n  onClose,\n  onSubmit,\n  editingRate,\n  onSuccess,\n}) => {\n  const [formData, setFormData] = useState<RateFormData>(initialFormData);\n  const [errors, setErrors] = useState<string[]>([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const isEditing = !!editingRate;\n\n  useEffect(() => {\n    if (editingRate) {\n      setFormData({\n        item: editingRate.item,\n        route: editingRate.route,\n        rate: editingRate.rate,\n        unit: editingRate.unit,\n        currency: editingRate.currency,\n        type: editingRate.type,\n        notes: editingRate.notes,\n      });\n    } else {\n      setFormData(initialFormData);\n    }\n    setErrors([]);\n  }, [editingRate, isOpen]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setErrors([]);\n\n    try {\n      const result = onSubmit(formData);\n      if (result.success) {\n        onSuccess?.();\n        onClose();\n        setFormData(initialFormData);\n      } else {\n        setErrors(result.errors);\n      }\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleChange = <K extends keyof RateFormData>(\n    field: K,\n    value: RateFormData[K]\n  ) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    setErrors([]);\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} size=\"lg\">\n      <form onSubmit={handleSubmit}>\n        <div className=\"p-6 border-b border-gray-100\">\n          <h3 className=\"text-2xl font-black flex items-center gap-3\">\n            <div className=\"p-2 bg-blue-100 rounded-xl\">\n              <Cloud className=\"text-blue-600\" size={28} />\n            </div>\n            {isEditing ? 'Редактировать запись' : 'Добавить в базу данных'}\n          </h3>\n        </div>\n\n        <div className=\"p-6 space-y-5\">\n          {errors.length > 0 && (\n            <div className=\"p-4 bg-red-50 border-2 border-red-200 rounded-xl\">\n              <ul className=\"list-disc list-inside text-sm text-red-600 font-medium\">\n                {errors.map((error, i) => (\n                  <li key={i}>{error}</li>\n                ))}\n              </ul>\n            </div>\n          )}\n\n          <Input\n            label=\"Товар *\"\n            placeholder=\"Например: Электроника, Одежда, Косметика\"\n            value={formData.item}\n            onChange={e => handleChange('item', e.target.value)}\n            required\n            autoFocus\n          />\n\n          <Input\n            label=\"Маршрут\"\n            placeholder=\"Например: Милан → Москва\"\n            value={formData.route}\n            onChange={e => handleChange('route', e.target.value)}\n          />\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <Input\n              label=\"Ставка *\"\n              type=\"number\"\n              placeholder=\"0.00\"\n              value={formData.rate || ''}\n              onChange={e => handleChange('rate', parseFloat(e.target.value) || 0)}\n              min={0}\n              step={0.1}\n              required\n            />\n            <Select\n              label=\"Единица\"\n              options={UNIT_OPTIONS}\n              value={formData.unit}\n              onChange={e => handleChange('unit', e.target.value as RateFormData['unit'])}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <Select\n              label=\"Валюта\"\n              options={CURRENCY_OPTIONS.map(c => ({ value: c.value, label: `${c.label} (${c.symbol})` }))}\n              value={formData.currency}\n              onChange={e => handleChange('currency', e.target.value as RateFormData['currency'])}\n            />\n            <Select\n              label=\"Тип расчета\"\n              options={PAYMENT_TYPE_OPTIONS}\n              value={formData.type}\n              onChange={e => handleChange('type', e.target.value as RateFormData['type'])}\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-2\">\n              Дополнительные условия\n            </label>\n            <textarea\n              placeholder=\"Например: маркировка, EX1, температурный режим, страховка\"\n              className=\"w-full p-4 bg-gray-50 border-2 border-gray-200 rounded-xl outline-none focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 h-24 text-sm resize-none transition-all\"\n              value={formData.notes}\n              onChange={e => handleChange('notes', e.target.value)}\n            />\n          </div>\n        </div>\n\n        <div className=\"p-6 border-t border-gray-100 flex gap-3\">\n          <Button type=\"button\" variant=\"secondary\" onClick={onClose} className=\"flex-1\">\n            Отмена\n          </Button>\n          <Button\n            type=\"submit\"\n            variant=\"primary\"\n            isLoading={isSubmitting}\n            leftIcon={isEditing ? <Save size={20} /> : <Plus size={20} />}\n            className=\"flex-1\"\n          >\n            {isEditing ? 'Сохранить изменения' : 'Добавить в базу'}\n          </Button>\n        </div>\n      </form>\n    </Modal>\n  );\n};\n",
    "src/components/features/database/RateTable.tsx": "import React from 'react';\nimport { Database, Edit2, Trash2, ArrowUpDown } from 'lucide-react';\nimport { cn, formatDate } from '../../../utils';\nimport type { Rate, SortConfig, SortField } from '../../../types';\n\ninterface RateTableProps {\n  rates: Rate[];\n  sort: SortConfig;\n  onSort: (field: SortField) => void;\n  onEdit: (rate: Rate) => void;\n  onDelete: (id: string) => void;\n}\n\nconst SortableHeader: React.FC<{\n  field: SortField;\n  currentSort: SortConfig;\n  onSort: (field: SortField) => void;\n  children: React.ReactNode;\n  className?: string;\n}> = ({ field, currentSort, onSort, children, className }) => (\n  <th\n    className={cn('p-5 text-[11px] font-black text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors', className)}\n    onClick={() => onSort(field)}\n    role=\"columnheader\"\n    aria-sort={currentSort.field === field ? (currentSort.direction === 'asc' ? 'ascending' : 'descending') : 'none'}\n  >\n    <div className=\"flex items-center gap-1\">\n      {children}\n      <ArrowUpDown\n        size={12}\n        className={cn(\n          'transition-colors',\n          currentSort.field === field ? 'text-blue-600' : 'text-gray-300'\n        )}\n      />\n    </div>\n  </th>\n);\n\nexport const RateTable: React.FC<RateTableProps> = ({\n  rates,\n  sort,\n  onSort,\n  onEdit,\n  onDelete,\n}) => {\n  if (rates.length === 0) {\n    return (\n      <div className=\"p-16 text-center\">\n        <Database className=\"mx-auto mb-4 text-gray-300\" size={64} aria-hidden=\"true\" />\n        <p className=\"text-xl text-slate-400 font-bold\">База пуста или ничего не найдено</p>\n        <p className=\"text-sm text-slate-300 mt-2\">\n          Добавьте первую запись или измените поисковый запрос\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"overflow-x-auto\">\n      <table className=\"w-full text-left border-collapse\" role=\"grid\">\n        <thead>\n          <tr className=\"bg-gradient-to-r from-gray-50 to-gray-100 border-b-2 border-gray-200\">\n            <SortableHeader field=\"item\" currentSort={sort} onSort={onSort}>\n              Груз / Дата\n            </SortableHeader>\n            <SortableHeader field=\"route\" currentSort={sort} onSort={onSort}>\n              Маршрут\n            </SortableHeader>\n            <SortableHeader field=\"rate\" currentSort={sort} onSort={onSort} className=\"text-blue-600\">\n              Ставка iCar\n            </SortableHeader>\n            <th className=\"p-5 text-[11px] font-black text-gray-500 uppercase tracking-wider\">\n              Примечания\n            </th>\n            <th className=\"p-5 text-[11px] font-black text-gray-500 uppercase tracking-wider text-center\">\n              Действия\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {rates.map(rate => (\n            <tr\n              key={rate.id}\n              className=\"border-b border-gray-100 hover:bg-blue-50/30 transition-all group\"\n            >\n              <td className=\"p-5\">\n                <p className=\"font-bold text-slate-800 text-base\">{rate.item}</p>\n                <p className=\"text-[10px] text-gray-400 font-semibold mt-1\">\n                  {formatDate(rate.date)}\n                </p>\n              </td>\n              <td className=\"p-5 text-sm text-gray-700 font-medium\">{rate.route || '—'}</td>\n              <td className=\"p-5\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <span className=\"font-black text-blue-700 text-lg\">\n                    {rate.rate} {rate.currency}\n                    {rate.unit === 'кг' ? '/кг' : ''}\n                  </span>\n                  <span\n                    className={cn(\n                      'px-2 py-0.5 rounded-md text-[9px] font-black uppercase',\n                      rate.type === 'Нал'\n                        ? 'bg-green-100 text-green-700'\n                        : 'bg-purple-100 text-purple-700'\n                    )}\n                  >\n                    {rate.type}\n                  </span>\n                </div>\n              </td>\n              <td className=\"p-5\">\n                <p className=\"text-xs text-gray-600 leading-relaxed max-w-xs\">\n                  {rate.notes || '—'}\n                </p>\n              </td>\n              <td className=\"p-5\">\n                <div className=\"flex gap-2 justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\n                  <button\n                    onClick={() => onEdit(rate)}\n                    className=\"text-blue-400 hover:text-blue-600 transition p-2 hover:bg-blue-50 rounded-lg\"\n                    aria-label={`Редактировать ${rate.item}`}\n                  >\n                    <Edit2 size={18} />\n                  </button>\n                  <button\n                    onClick={() => onDelete(rate.id)}\n                    className=\"text-gray-300 hover:text-red-500 transition p-2 hover:bg-red-50 rounded-lg\"\n                    aria-label={`Удалить ${rate.item}`}\n                  >\n                    <Trash2 size={18} />\n                  </button>\n                </div>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n",
    "src/components/features/database/index.ts": "export { DatabaseView } from './DatabaseView';\nexport { RateTable } from './RateTable';\nexport { RateForm } from './RateForm';\n",
    "src/components/layout/Footer.tsx": "import React from 'react';\nimport { ShieldCheck } from 'lucide-react';\n\ninterface FooterProps {\n  totalRecords: number;\n}\n\nexport const Footer: React.FC<FooterProps> = ({ totalRecords }) => {\n  return (\n    <footer className=\"mt-auto p-6 text-center border-t border-gray-200 bg-white\">\n      <div className=\"flex flex-col sm:flex-row items-center justify-center gap-3 text-[11px] text-gray-400 uppercase font-bold tracking-wider\">\n        <div className=\"flex items-center gap-2\">\n          <ShieldCheck size={16} className=\"text-green-500\" aria-hidden=\"true\" />\n          <span>ELP Cloud Infrastructure</span>\n        </div>\n        <span className=\"hidden sm:inline\" aria-hidden=\"true\">•</span>\n        <span>Protected Session</span>\n        <span className=\"hidden sm:inline\" aria-hidden=\"true\">•</span>\n        <span className=\"text-blue-600\">\n          {totalRecords} {getRecordLabel(totalRecords)} в базе\n        </span>\n      </div>\n    </footer>\n  );\n};\n\nfunction getRecordLabel(count: number): string {\n  const lastDigit = count % 10;\n  const lastTwoDigits = count % 100;\n\n  if (lastTwoDigits >= 11 && lastTwoDigits <= 14) {\n    return 'записей';\n  }\n\n  if (lastDigit === 1) {\n    return 'запись';\n  }\n\n  if (lastDigit >= 2 && lastDigit <= 4) {\n    return 'записи';\n  }\n\n  return 'записей';\n}\n",
    "src/components/layout/Header.tsx": "import React from 'react';\nimport { Truck, Database, Calculator, BarChart3 } from 'lucide-react';\nimport { cn } from '../../utils';\nimport { APP_NAME } from '../../constants';\nimport type { TabType } from '../../types';\n\ninterface HeaderProps {\n  activeTab: TabType;\n  onTabChange: (tab: TabType) => void;\n}\n\nconst tabs: { id: TabType; label: string; shortLabel: string; icon: React.ReactNode }[] = [\n  { id: 'database', label: 'База данных', shortLabel: 'База', icon: <Database size={20} /> },\n  { id: 'calculator', label: 'Калькулятор', shortLabel: 'Расчет', icon: <Calculator size={20} /> },\n  { id: 'analytics', label: 'Аналитика', shortLabel: 'Статистика', icon: <BarChart3 size={20} /> },\n];\n\nexport const Header: React.FC<HeaderProps> = ({ activeTab, onTabChange }) => {\n  return (\n    <nav\n      className=\"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 text-white p-4 shadow-2xl sticky top-0 z-40 border-b border-slate-700\"\n      role=\"navigation\"\n      aria-label=\"Основная навигация\"\n    >\n      <div className=\"max-w-7xl mx-auto flex justify-between items-center\">\n        {/* Logo */}\n        <div className=\"flex items-center gap-3\">\n          <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 p-2.5 rounded-xl shadow-lg\">\n            <Truck size={26} aria-hidden=\"true\" />\n          </div>\n          <div>\n            <h1 className=\"font-black text-2xl tracking-tight\">{APP_NAME}</h1>\n            <p className=\"text-[9px] text-blue-400 uppercase tracking-widest font-bold\">\n              Logistics Management System\n            </p>\n          </div>\n        </div>\n\n        {/* Tab Navigation */}\n        <div className=\"flex gap-2 md:gap-3\" role=\"tablist\" aria-label=\"Разделы приложения\">\n          {tabs.map(tab => (\n            <button\n              key={tab.id}\n              role=\"tab\"\n              aria-selected={activeTab === tab.id}\n              aria-controls={`${tab.id}-panel`}\n              onClick={() => onTabChange(tab.id)}\n              className={cn(\n                'flex items-center gap-2 px-4 py-2.5 rounded-xl transition-all font-bold',\n                'focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-slate-800',\n                activeTab === tab.id\n                  ? 'bg-blue-600 shadow-lg shadow-blue-500/50'\n                  : 'hover:bg-slate-700/50'\n              )}\n            >\n              {tab.icon}\n              <span className=\"hidden sm:inline\">{tab.label}</span>\n              <span className=\"sm:hidden\">{tab.shortLabel}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n    </nav>\n  );\n};\n",
    "src/components/layout/index.ts": "export { Header } from './Header';\nexport { Footer } from './Footer';\n",
    "src/components/ui/Button.tsx": "import React from 'react';\nimport { Loader2 } from 'lucide-react';\nimport { cn } from '../../utils';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'danger' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n  isLoading?: boolean;\n  leftIcon?: React.ReactNode;\n  rightIcon?: React.ReactNode;\n}\n\nconst variantStyles = {\n  primary: 'bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 shadow-lg hover:shadow-xl',\n  secondary: 'bg-white border-2 border-gray-200 text-gray-700 hover:bg-gray-50',\n  danger: 'bg-gradient-to-r from-red-600 to-red-700 text-white hover:from-red-700 hover:to-red-800 shadow-lg',\n  ghost: 'text-gray-600 hover:bg-gray-100',\n};\n\nconst sizeStyles = {\n  sm: 'px-3 py-2 text-sm gap-1.5',\n  md: 'px-4 py-2.5 text-sm gap-2',\n  lg: 'px-5 py-3 text-base gap-2',\n};\n\nexport const Button: React.FC<ButtonProps> = ({\n  children,\n  variant = 'primary',\n  size = 'md',\n  isLoading = false,\n  leftIcon,\n  rightIcon,\n  disabled,\n  className,\n  ...props\n}) => {\n  return (\n    <button\n      disabled={disabled || isLoading}\n      className={cn(\n        'inline-flex items-center justify-center font-bold rounded-xl transition-all',\n        'focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500',\n        'disabled:opacity-50 disabled:cursor-not-allowed',\n        variantStyles[variant],\n        sizeStyles[size],\n        className\n      )}\n      {...props}\n    >\n      {isLoading ? (\n        <Loader2 className=\"animate-spin\" size={size === 'sm' ? 14 : size === 'md' ? 16 : 18} />\n      ) : (\n        leftIcon\n      )}\n      {children}\n      {!isLoading && rightIcon}\n    </button>\n  );\n};\n",
    "src/components/ui/ConfirmDialog.tsx": "import React from 'react';\nimport { AlertTriangle, AlertCircle, Info } from 'lucide-react';\nimport { Modal } from './Modal';\nimport { cn } from '../../utils';\n\ninterface ConfirmDialogProps {\n  isOpen: boolean;\n  onConfirm: () => void;\n  onCancel: () => void;\n  title: string;\n  message: string;\n  confirmText?: string;\n  cancelText?: string;\n  variant?: 'danger' | 'warning' | 'info';\n}\n\nconst variantStyles = {\n  danger: {\n    icon: <AlertCircle className=\"text-red-500\" size={48} />,\n    button: 'bg-red-600 hover:bg-red-700 focus:ring-red-500',\n    iconBg: 'bg-red-100',\n  },\n  warning: {\n    icon: <AlertTriangle className=\"text-yellow-600\" size={48} />,\n    button: 'bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500',\n    iconBg: 'bg-yellow-100',\n  },\n  info: {\n    icon: <Info className=\"text-blue-500\" size={48} />,\n    button: 'bg-blue-600 hover:bg-blue-700 focus:ring-blue-500',\n    iconBg: 'bg-blue-100',\n  },\n};\n\nexport const ConfirmDialog: React.FC<ConfirmDialogProps> = ({\n  isOpen,\n  onConfirm,\n  onCancel,\n  title,\n  message,\n  confirmText = 'Подтвердить',\n  cancelText = 'Отмена',\n  variant = 'info',\n}) => {\n  const style = variantStyles[variant];\n\n  return (\n    <Modal isOpen={isOpen} onClose={onCancel} size=\"sm\">\n      <div className=\"p-6 text-center\">\n        <div className={cn('inline-flex p-4 rounded-full mb-4', style.iconBg)}>\n          {style.icon}\n        </div>\n        <h3 className=\"text-xl font-bold text-gray-900 mb-2\">{title}</h3>\n        <p className=\"text-gray-600 mb-6\">{message}</p>\n        <div className=\"flex gap-3\">\n          <button\n            onClick={onCancel}\n            className=\"flex-1 py-3 px-4 border-2 border-gray-200 rounded-xl font-bold text-gray-600 hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300\"\n          >\n            {cancelText}\n          </button>\n          <button\n            onClick={onConfirm}\n            className={cn(\n              'flex-1 py-3 px-4 text-white rounded-xl font-bold transition-colors',\n              'focus:outline-none focus:ring-2 focus:ring-offset-2',\n              style.button\n            )}\n          >\n            {confirmText}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n",
    "src/components/ui/Input.tsx": "import React, { forwardRef } from 'react';\nimport { cn } from '../../utils';\n\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  label?: string;\n  error?: string;\n  hint?: string;\n  leftIcon?: React.ReactNode;\n  rightIcon?: React.ReactNode;\n}\n\nexport const Input = forwardRef<HTMLInputElement, InputProps>(\n  ({ label, error, hint, leftIcon, rightIcon, className, id, ...props }, ref) => {\n    const inputId = id || label?.toLowerCase().replace(/\\s+/g, '-');\n\n    return (\n      <div className=\"w-full\">\n        {label && (\n          <label\n            htmlFor={inputId}\n            className=\"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-2\"\n          >\n            {label}\n          </label>\n        )}\n        <div className=\"relative\">\n          {leftIcon && (\n            <div className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\">\n              {leftIcon}\n            </div>\n          )}\n          <input\n            ref={ref}\n            id={inputId}\n            className={cn(\n              'w-full px-4 py-3 bg-gray-50 border-2 rounded-xl outline-none transition-all',\n              'focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500',\n              'placeholder:text-gray-400',\n              leftIcon && 'pl-12',\n              rightIcon && 'pr-12',\n              error ? 'border-red-300 focus:border-red-500 focus:ring-red-500/20' : 'border-gray-200',\n              className\n            )}\n            aria-invalid={error ? 'true' : 'false'}\n            aria-describedby={error ? `${inputId}-error` : hint ? `${inputId}-hint` : undefined}\n            {...props}\n          />\n          {rightIcon && (\n            <div className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400\">\n              {rightIcon}\n            </div>\n          )}\n        </div>\n        {error && (\n          <p id={`${inputId}-error`} className=\"mt-1.5 text-xs text-red-600 font-medium\">\n            {error}\n          </p>\n        )}\n        {hint && !error && (\n          <p id={`${inputId}-hint`} className=\"mt-1.5 text-xs text-gray-500\">\n            {hint}\n          </p>\n        )}\n      </div>\n    );\n  }\n);\n\nInput.displayName = 'Input';\n",
    "src/components/ui/Modal.tsx": "import React, { useEffect, useRef } from 'react';\nimport { X } from 'lucide-react';\nimport { cn } from '../../utils';\n\ninterface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title?: string;\n  children: React.ReactNode;\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n}\n\nconst sizeClasses = {\n  sm: 'max-w-sm',\n  md: 'max-w-md',\n  lg: 'max-w-lg',\n  xl: 'max-w-xl',\n};\n\nexport const Modal: React.FC<ModalProps> = ({\n  isOpen,\n  onClose,\n  title,\n  children,\n  size = 'md',\n}) => {\n  const modalRef = useRef<HTMLDivElement>(null);\n  const previousActiveElement = useRef<HTMLElement | null>(null);\n\n  useEffect(() => {\n    if (isOpen) {\n      previousActiveElement.current = document.activeElement as HTMLElement;\n      modalRef.current?.focus();\n\n      // Prevent body scroll\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = '';\n      previousActiveElement.current?.focus();\n    }\n\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, [isOpen]);\n\n  useEffect(() => {\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && isOpen) {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [isOpen, onClose]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby={title ? 'modal-title' : undefined}\n    >\n      {/* Backdrop */}\n      <div\n        className=\"absolute inset-0 bg-slate-900/70 backdrop-blur-sm animate-fade-in\"\n        onClick={onClose}\n        aria-hidden=\"true\"\n      />\n\n      {/* Modal content */}\n      <div\n        ref={modalRef}\n        tabIndex={-1}\n        className={cn(\n          'relative w-full bg-white rounded-3xl shadow-2xl border-2 border-blue-100',\n          'animate-scale-in',\n          sizeClasses[size]\n        )}\n      >\n        {title && (\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\n            <h2 id=\"modal-title\" className=\"text-xl font-bold text-gray-900\">\n              {title}\n            </h2>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 rounded-xl transition-colors\"\n              aria-label=\"Закрыть\"\n            >\n              <X size={20} className=\"text-gray-500\" />\n            </button>\n          </div>\n        )}\n        <div className={cn(!title && 'pt-6')}>{children}</div>\n      </div>\n    </div>\n  );\n};\n",
    "src/components/ui/Select.tsx": "import React, { forwardRef } from 'react';\nimport { ChevronDown } from 'lucide-react';\nimport { cn } from '../../utils';\n\ninterface SelectOption {\n  value: string;\n  label: string;\n}\n\ninterface SelectProps extends Omit<React.SelectHTMLAttributes<HTMLSelectElement>, 'children'> {\n  label?: string;\n  error?: string;\n  options: SelectOption[];\n  placeholder?: string;\n}\n\nexport const Select = forwardRef<HTMLSelectElement, SelectProps>(\n  ({ label, error, options, placeholder, className, id, ...props }, ref) => {\n    const selectId = id || label?.toLowerCase().replace(/\\s+/g, '-');\n\n    return (\n      <div className=\"w-full\">\n        {label && (\n          <label\n            htmlFor={selectId}\n            className=\"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-2\"\n          >\n            {label}\n          </label>\n        )}\n        <div className=\"relative\">\n          <select\n            ref={ref}\n            id={selectId}\n            className={cn(\n              'w-full px-4 py-3 bg-gray-50 border-2 rounded-xl outline-none transition-all appearance-none',\n              'focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500',\n              'font-medium',\n              error ? 'border-red-300 focus:border-red-500 focus:ring-red-500/20' : 'border-gray-200',\n              className\n            )}\n            aria-invalid={error ? 'true' : 'false'}\n            aria-describedby={error ? `${selectId}-error` : undefined}\n            {...props}\n          >\n            {placeholder && (\n              <option value=\"\" disabled>\n                {placeholder}\n              </option>\n            )}\n            {options.map(option => (\n              <option key={option.value} value={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n          <ChevronDown\n            size={18}\n            className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none\"\n          />\n        </div>\n        {error && (\n          <p id={`${selectId}-error`} className=\"mt-1.5 text-xs text-red-600 font-medium\">\n            {error}\n          </p>\n        )}\n      </div>\n    );\n  }\n);\n\nSelect.displayName = 'Select';\n",
    "src/components/ui/Toast.tsx": "import React from 'react';\nimport { X, CheckCircle, AlertCircle, AlertTriangle, Info } from 'lucide-react';\nimport type { Toast as ToastType, ToastType as ToastVariant } from '../../types';\nimport { cn } from '../../utils';\n\ninterface ToastProps {\n  toast: ToastType;\n  onDismiss: (id: string) => void;\n}\n\nconst toastStyles: Record<ToastVariant, { bg: string; icon: React.ReactNode; border: string }> = {\n  success: {\n    bg: 'bg-green-50',\n    border: 'border-green-200',\n    icon: <CheckCircle className=\"text-green-500\" size={20} />,\n  },\n  error: {\n    bg: 'bg-red-50',\n    border: 'border-red-200',\n    icon: <AlertCircle className=\"text-red-500\" size={20} />,\n  },\n  warning: {\n    bg: 'bg-yellow-50',\n    border: 'border-yellow-200',\n    icon: <AlertTriangle className=\"text-yellow-600\" size={20} />,\n  },\n  info: {\n    bg: 'bg-blue-50',\n    border: 'border-blue-200',\n    icon: <Info className=\"text-blue-500\" size={20} />,\n  },\n};\n\nexport const Toast: React.FC<ToastProps> = ({ toast, onDismiss }) => {\n  const style = toastStyles[toast.type];\n\n  return (\n    <div\n      role=\"alert\"\n      aria-live=\"polite\"\n      className={cn(\n        'flex items-center gap-3 px-4 py-3 rounded-xl border-2 shadow-lg',\n        'animate-slide-up backdrop-blur-sm',\n        style.bg,\n        style.border\n      )}\n    >\n      {style.icon}\n      <p className=\"flex-1 text-sm font-medium text-gray-800\">{toast.message}</p>\n      <button\n        onClick={() => onDismiss(toast.id)}\n        className=\"p-1 hover:bg-black/5 rounded-lg transition-colors\"\n        aria-label=\"Закрыть уведомление\"\n      >\n        <X size={16} className=\"text-gray-400\" />\n      </button>\n    </div>\n  );\n};\n\ninterface ToastContainerProps {\n  toasts: ToastType[];\n  onDismiss: (id: string) => void;\n}\n\nexport const ToastContainer: React.FC<ToastContainerProps> = ({ toasts, onDismiss }) => {\n  if (toasts.length === 0) return null;\n\n  return (\n    <div\n      className=\"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-md\"\n      aria-label=\"Уведомления\"\n    >\n      {toasts.map(toast => (\n        <Toast key={toast.id} toast={toast} onDismiss={onDismiss} />\n      ))}\n    </div>\n  );\n};\n",
    "src/components/ui/index.ts": "export { Toast, ToastContainer } from './Toast';\nexport { Modal } from './Modal';\nexport { ConfirmDialog } from './ConfirmDialog';\nexport { Button } from './Button';\nexport { Input } from './Input';\nexport { Select } from './Select';\n",
    "src/constants/index.ts": "import type { AppSettings, Currency, PaymentType, Unit } from '../types';\n\n// ============================================\n// Application Constants\n// ============================================\n\nexport const APP_NAME = 'ELP Cloud';\nexport const APP_VERSION = '2.0.0';\nexport const STORAGE_KEY = 'elp-rates-v2';\nexport const SETTINGS_KEY = 'elp-settings-v2';\nexport const HISTORY_KEY = 'elp-calc-history';\n\n// ============================================\n// Business Logic Constants\n// ============================================\n\nexport const DEFAULT_SETTINGS: AppSettings = {\n  exchangeRate: 105,\n  elpMarginPerKg: 2,\n  beznalMarkup: 1.1, // 10% markup for non-cash\n  theme: 'light',\n  language: 'ru',\n};\n\nexport const EXCHANGE_RATE_RANGE = {\n  min: 80,\n  max: 150,\n  step: 0.5,\n};\n\n// ============================================\n// Dropdown Options\n// ============================================\n\nexport const CURRENCY_OPTIONS: { value: Currency; label: string; symbol: string }[] = [\n  { value: 'EUR', label: 'EUR', symbol: '€' },\n  { value: 'USD', label: 'USD', symbol: '$' },\n];\n\nexport const PAYMENT_TYPE_OPTIONS: { value: PaymentType; label: string }[] = [\n  { value: 'Нал', label: 'Наличный' },\n  { value: 'Безнал', label: 'Безналичный' },\n];\n\nexport const UNIT_OPTIONS: { value: Unit; label: string }[] = [\n  { value: 'кг', label: 'за кг' },\n  { value: 'фикс', label: 'фиксированная' },\n];\n\n// ============================================\n// Demo Data\n// ============================================\n\nexport const DEMO_RATES = [\n  {\n    id: '1',\n    item: 'Электроника (смартфоны)',\n    route: 'Шанхай → Москва (авиа)',\n    rate: 4.5,\n    unit: 'кг' as Unit,\n    currency: 'EUR' as Currency,\n    type: 'Нал' as PaymentType,\n    notes: 'EX1, маркировка включена, срок 5-7 дней',\n    date: '2025-01-04',\n    createdAt: '2025-01-04T10:00:00Z',\n  },\n  {\n    id: '2',\n    item: 'Одежда (текстиль)',\n    route: 'Милан → Санкт-Петербург',\n    rate: 3.2,\n    unit: 'кг' as Unit,\n    currency: 'EUR' as Currency,\n    type: 'Безнал' as PaymentType,\n    notes: 'Оптовая партия от 500кг, автодоставка',\n    date: '2025-01-03',\n    createdAt: '2025-01-03T14:30:00Z',\n  },\n  {\n    id: '3',\n    item: 'Косметика (премиум)',\n    route: 'Париж → Москва',\n    rate: 5.8,\n    unit: 'кг' as Unit,\n    currency: 'EUR' as Currency,\n    type: 'Нал' as PaymentType,\n    notes: 'Температурный режим +15°C, страховка включена',\n    date: '2025-01-02',\n    createdAt: '2025-01-02T09:15:00Z',\n  },\n  {\n    id: '4',\n    item: 'Автозапчасти',\n    route: 'Штутгарт → Екатеринбург',\n    rate: 250,\n    unit: 'фикс' as Unit,\n    currency: 'EUR' as Currency,\n    type: 'Безнал' as PaymentType,\n    notes: 'Паллета 120x80, до 500кг',\n    date: '2025-01-01',\n    createdAt: '2025-01-01T16:45:00Z',\n  },\n  {\n    id: '5',\n    item: 'Медицинское оборудование',\n    route: 'Берлин → Казань',\n    rate: 8.2,\n    unit: 'кг' as Unit,\n    currency: 'EUR' as Currency,\n    type: 'Безнал' as PaymentType,\n    notes: 'Хрупкий груз, особые условия хранения',\n    date: '2024-12-28',\n    createdAt: '2024-12-28T11:20:00Z',\n  },\n  {\n    id: '6',\n    item: 'Продукты питания',\n    route: 'Стамбул → Новосибирск',\n    rate: 2.9,\n    unit: 'кг' as Unit,\n    currency: 'USD' as Currency,\n    type: 'Нал' as PaymentType,\n    notes: 'Рефрижератор, температура 0-4°C',\n    date: '2024-12-25',\n    createdAt: '2024-12-25T08:00:00Z',\n  },\n];\n\n// ============================================\n// Keyboard Shortcuts\n// ============================================\n\nexport const KEYBOARD_SHORTCUTS = {\n  NEW_RATE: 'ctrl+n',\n  SEARCH: 'ctrl+k',\n  EXPORT: 'ctrl+e',\n  TOGGLE_TAB: 'ctrl+tab',\n} as const;\n\n// ============================================\n// Animation Durations\n// ============================================\n\nexport const ANIMATION = {\n  FAST: 150,\n  NORMAL: 300,\n  SLOW: 500,\n} as const;\n\n// ============================================\n// Toast Configuration\n// ============================================\n\nexport const TOAST_CONFIG = {\n  DEFAULT_DURATION: 4000,\n  MAX_VISIBLE: 5,\n} as const;\n",
    "src/hooks/index.ts": "export { useLocalStorage } from './useLocalStorage';\nexport { useRates } from './useRates';\nexport { useCalculator } from './useCalculator';\nexport { useToast } from './useToast';\n",
    "src/hooks/useCalculator.ts": "import { useState, useMemo, useCallback } from 'react';\nimport { useLocalStorage } from './useLocalStorage';\nimport { calculateShipping, generateId, getCurrentTimestamp } from '../utils';\nimport { HISTORY_KEY, DEFAULT_SETTINGS } from '../constants';\nimport type { Rate, CalculationResult, CalculationHistory, AppSettings } from '../types';\n\nconst MAX_HISTORY_ITEMS = 20;\n\nexport function useCalculator(settings: AppSettings = DEFAULT_SETTINGS) {\n  const [selectedRate, setSelectedRate] = useState<Rate | null>(null);\n  const [weight, setWeight] = useState<string>('');\n  const [history, setHistory, clearHistory] = useLocalStorage<CalculationHistory[]>(HISTORY_KEY, []);\n\n  // Calculate result\n  const result = useMemo((): CalculationResult | null => {\n    if (!selectedRate) return null;\n\n    const weightNum = parseFloat(weight);\n    if (isNaN(weightNum) || weightNum <= 0) return null;\n\n    return calculateShipping(selectedRate, weightNum, settings);\n  }, [selectedRate, weight, settings]);\n\n  // Select a rate for calculation\n  const selectRate = useCallback((rate: Rate | null) => {\n    setSelectedRate(rate);\n  }, []);\n\n  // Update weight input\n  const updateWeight = useCallback((value: string) => {\n    // Allow empty string or valid numbers\n    if (value === '' || /^\\d*\\.?\\d*$/.test(value)) {\n      setWeight(value);\n    }\n  }, []);\n\n  // Save current calculation to history\n  const saveToHistory = useCallback(() => {\n    if (!result) return false;\n\n    const historyItem: CalculationHistory = {\n      id: generateId(),\n      timestamp: getCurrentTimestamp(),\n      result,\n    };\n\n    setHistory(prev => {\n      const updated = [historyItem, ...prev];\n      // Keep only the last N items\n      return updated.slice(0, MAX_HISTORY_ITEMS);\n    });\n\n    return true;\n  }, [result, setHistory]);\n\n  // Remove item from history\n  const removeFromHistory = useCallback((id: string) => {\n    setHistory(prev => prev.filter(h => h.id !== id));\n  }, [setHistory]);\n\n  // Clear calculation\n  const clearCalculation = useCallback(() => {\n    setSelectedRate(null);\n    setWeight('');\n  }, []);\n\n  // Clear all history\n  const clearAllHistory = useCallback(() => {\n    clearHistory();\n  }, [clearHistory]);\n\n  return {\n    // State\n    selectedRate,\n    weight,\n    result,\n    history,\n\n    // Actions\n    selectRate,\n    updateWeight,\n    saveToHistory,\n    removeFromHistory,\n    clearCalculation,\n    clearAllHistory,\n\n    // Computed\n    hasResult: result !== null,\n    historyCount: history.length,\n  };\n}\n",
    "src/hooks/useLocalStorage.ts": "import { useState, useEffect, useCallback } from 'react';\nimport { safeLocalStorage } from '../utils';\n\nexport function useLocalStorage<T>(key: string, initialValue: T) {\n  // Get from local storage then parse stored json or return initialValue\n  const readValue = useCallback((): T => {\n    if (typeof window === 'undefined') {\n      return initialValue;\n    }\n    return safeLocalStorage.get(key, initialValue);\n  }, [key, initialValue]);\n\n  const [storedValue, setStoredValue] = useState<T>(readValue);\n\n  // Return a wrapped version of useState's setter function that persists to localStorage\n  const setValue = useCallback((value: T | ((val: T) => T)) => {\n    try {\n      // Allow value to be a function for same API as useState\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n\n      setStoredValue(valueToStore);\n      safeLocalStorage.set(key, valueToStore);\n\n      // Dispatch a custom event so other hooks using the same key update\n      window.dispatchEvent(new StorageEvent('storage', {\n        key,\n        newValue: JSON.stringify(valueToStore),\n      }));\n    } catch (error) {\n      console.warn(`Error setting localStorage key \"${key}\":`, error);\n    }\n  }, [key, storedValue]);\n\n  const removeValue = useCallback(() => {\n    try {\n      safeLocalStorage.remove(key);\n      setStoredValue(initialValue);\n\n      window.dispatchEvent(new StorageEvent('storage', {\n        key,\n        newValue: null,\n      }));\n    } catch (error) {\n      console.warn(`Error removing localStorage key \"${key}\":`, error);\n    }\n  }, [key, initialValue]);\n\n  // Listen for storage changes\n  useEffect(() => {\n    const handleStorageChange = (e: StorageEvent) => {\n      if (e.key === key && e.newValue !== null) {\n        setStoredValue(safeLocalStorage.get(key, initialValue));\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, [key, initialValue]);\n\n  return [storedValue, setValue, removeValue] as const;\n}\n",
    "src/hooks/useRates.ts": "import { useState, useCallback, useMemo } from 'react';\nimport { useLocalStorage } from './useLocalStorage';\nimport {\n  generateId,\n  getCurrentDate,\n  getCurrentTimestamp,\n  filterRates,\n  sortRates,\n  validateRate\n} from '../utils';\nimport { STORAGE_KEY, DEMO_RATES } from '../constants';\nimport type { Rate, RateFormData, FilterConfig, SortConfig } from '../types';\n\nexport function useRates() {\n  const [rates, setRates, clearRates] = useLocalStorage<Rate[]>(STORAGE_KEY, DEMO_RATES);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Filter and sort state\n  const [filter, setFilter] = useState<FilterConfig>({ searchTerm: '' });\n  const [sort, setSort] = useState<SortConfig>({ field: 'date', direction: 'desc' });\n\n  // Filtered and sorted rates\n  const filteredRates = useMemo(() => {\n    const filtered = filterRates(rates, filter);\n    return sortRates(filtered, sort);\n  }, [rates, filter, sort]);\n\n  // Add a new rate\n  const addRate = useCallback((data: RateFormData): { success: boolean; errors: string[] } => {\n    const errors = validateRate(data);\n    if (errors.length > 0) {\n      return { success: false, errors };\n    }\n\n    const newRate: Rate = {\n      ...data,\n      id: generateId(),\n      date: getCurrentDate(),\n      createdAt: getCurrentTimestamp(),\n    };\n\n    setRates(prev => [newRate, ...prev]);\n    return { success: true, errors: [] };\n  }, [setRates]);\n\n  // Update an existing rate\n  const updateRate = useCallback((id: string, data: Partial<Rate>): { success: boolean; errors: string[] } => {\n    const existingRate = rates.find(r => r.id === id);\n    if (!existingRate) {\n      return { success: false, errors: ['Запись не найдена'] };\n    }\n\n    const updatedRate = { ...existingRate, ...data };\n    const errors = validateRate(updatedRate);\n    if (errors.length > 0) {\n      return { success: false, errors };\n    }\n\n    setRates(prev => prev.map(r =>\n      r.id === id\n        ? { ...r, ...data, updatedAt: getCurrentTimestamp() }\n        : r\n    ));\n    return { success: true, errors: [] };\n  }, [rates, setRates]);\n\n  // Delete a rate\n  const deleteRate = useCallback((id: string): boolean => {\n    const exists = rates.some(r => r.id === id);\n    if (!exists) return false;\n\n    setRates(prev => prev.filter(r => r.id !== id));\n    return true;\n  }, [rates, setRates]);\n\n  // Get a rate by ID\n  const getRateById = useCallback((id: string): Rate | undefined => {\n    return rates.find(r => r.id === id);\n  }, [rates]);\n\n  // Import rates\n  const importRates = useCallback((newRates: Rate[], replace: boolean = false): number => {\n    setIsLoading(true);\n\n    try {\n      if (replace) {\n        setRates(newRates);\n        return newRates.length;\n      } else {\n        // Merge, avoiding duplicates by ID\n        const existingIds = new Set(rates.map(r => r.id));\n        const uniqueNewRates = newRates.filter(r => !existingIds.has(r.id));\n        setRates(prev => [...uniqueNewRates, ...prev]);\n        return uniqueNewRates.length;\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [rates, setRates]);\n\n  // Clear all rates\n  const clearAllRates = useCallback(() => {\n    clearRates();\n  }, [clearRates]);\n\n  // Update search term with debouncing handled by the caller\n  const setSearchTerm = useCallback((term: string) => {\n    setFilter(prev => ({ ...prev, searchTerm: term }));\n  }, []);\n\n  // Toggle sort\n  const toggleSort = useCallback((field: SortConfig['field']) => {\n    setSort(prev => ({\n      field,\n      direction: prev.field === field && prev.direction === 'desc' ? 'asc' : 'desc',\n    }));\n  }, []);\n\n  return {\n    // Data\n    rates,\n    filteredRates,\n    isLoading,\n\n    // Filter & Sort\n    filter,\n    sort,\n    setFilter,\n    setSort,\n    setSearchTerm,\n    toggleSort,\n\n    // CRUD Operations\n    addRate,\n    updateRate,\n    deleteRate,\n    getRateById,\n\n    // Bulk Operations\n    importRates,\n    clearAllRates,\n\n    // Stats\n    totalCount: rates.length,\n    filteredCount: filteredRates.length,\n  };\n}\n",
    "src/hooks/useToast.ts": "import { useState, useCallback } from 'react';\nimport { generateId } from '../utils';\nimport { TOAST_CONFIG } from '../constants';\nimport type { Toast, ToastType } from '../types';\n\nexport function useToast() {\n  const [toasts, setToasts] = useState<Toast[]>([]);\n\n  const addToast = useCallback((\n    message: string,\n    type: ToastType = 'info',\n    duration: number = TOAST_CONFIG.DEFAULT_DURATION\n  ) => {\n    const id = generateId();\n    const toast: Toast = { id, type, message, duration };\n\n    setToasts(prev => {\n      const updated = [...prev, toast];\n      // Keep only the last N toasts\n      return updated.slice(-TOAST_CONFIG.MAX_VISIBLE);\n    });\n\n    // Auto-remove after duration\n    if (duration > 0) {\n      setTimeout(() => {\n        removeToast(id);\n      }, duration);\n    }\n\n    return id;\n  }, []);\n\n  const removeToast = useCallback((id: string) => {\n    setToasts(prev => prev.filter(t => t.id !== id));\n  }, []);\n\n  const clearAll = useCallback(() => {\n    setToasts([]);\n  }, []);\n\n  // Convenience methods\n  const success = useCallback((message: string, duration?: number) =>\n    addToast(message, 'success', duration), [addToast]);\n\n  const error = useCallback((message: string, duration?: number) =>\n    addToast(message, 'error', duration), [addToast]);\n\n  const warning = useCallback((message: string, duration?: number) =>\n    addToast(message, 'warning', duration), [addToast]);\n\n  const info = useCallback((message: string, duration?: number) =>\n    addToast(message, 'info', duration), [addToast]);\n\n  return {\n    toasts,\n    addToast,\n    removeToast,\n    clearAll,\n    success,\n    error,\n    warning,\n    info,\n  };\n}\n",
    "src/index.css": "@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* Base styles */\nhtml {\n  scroll-behavior: smooth;\n}\n\nbody {\n  @apply antialiased;\n  font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';\n}\n\n/* Custom scrollbar */\n::-webkit-scrollbar {\n  width: 8px;\n  height: 8px;\n}\n\n::-webkit-scrollbar-track {\n  @apply bg-gray-100 rounded-full;\n}\n\n::-webkit-scrollbar-thumb {\n  @apply bg-gray-300 rounded-full hover:bg-gray-400 transition-colors;\n}\n\n/* Focus visible styles for accessibility */\n:focus-visible {\n  @apply outline-none ring-2 ring-blue-500 ring-offset-2;\n}\n\n/* Custom range input styling */\ninput[type='range'] {\n  @apply appearance-none bg-transparent cursor-pointer;\n}\n\ninput[type='range']::-webkit-slider-runnable-track {\n  @apply h-2 rounded-full bg-gray-200;\n}\n\ninput[type='range']::-webkit-slider-thumb {\n  @apply appearance-none w-4 h-4 rounded-full bg-blue-600 -mt-1 shadow-md hover:bg-blue-700 transition-colors;\n}\n\ninput[type='range']::-moz-range-track {\n  @apply h-2 rounded-full bg-gray-200;\n}\n\ninput[type='range']::-moz-range-thumb {\n  @apply appearance-none w-4 h-4 rounded-full bg-blue-600 border-0 shadow-md hover:bg-blue-700 transition-colors;\n}\n\n/* Table improvements */\ntable {\n  border-collapse: separate;\n  border-spacing: 0;\n}\n\n/* Animation classes */\n@keyframes shake {\n  0%, 100% { transform: translateX(0); }\n  25% { transform: translateX(-4px); }\n  75% { transform: translateX(4px); }\n}\n\n.animate-shake {\n  animation: shake 0.3s ease-in-out;\n}\n\n/* Print styles */\n@media print {\n  .no-print {\n    display: none !important;\n  }\n\n  body {\n    @apply bg-white;\n  }\n\n  nav, footer {\n    display: none !important;\n  }\n}\n\n/* Reduced motion */\n@media (prefers-reduced-motion: reduce) {\n  *,\n  *::before,\n  *::after {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n    scroll-behavior: auto !important;\n  }\n}\n",
    "src/main.tsx": "import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './index.css';\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n",
    "src/types/index.ts": "// ============================================\n// Core Domain Types\n// ============================================\n\nexport type Currency = 'EUR' | 'USD';\nexport type PaymentType = 'Нал' | 'Безнал';\nexport type Unit = 'кг' | 'фикс';\nexport type TabType = 'database' | 'calculator' | 'analytics';\n\nexport interface Rate {\n  id: string;\n  item: string;\n  route: string;\n  rate: number;\n  unit: Unit;\n  currency: Currency;\n  type: PaymentType;\n  notes: string;\n  date: string;\n  createdAt?: string;\n  updatedAt?: string;\n}\n\nexport type RateFormData = Omit<Rate, 'id' | 'date' | 'createdAt' | 'updatedAt'>;\n\nexport interface RateWithCalculation extends Rate {\n  calculatedPrice?: number;\n}\n\n// ============================================\n// Calculator Types\n// ============================================\n\nexport interface CalculationResult {\n  base: number;\n  margin: number;\n  total: number;\n  beznal: number;\n  rub: number;\n  weight: number;\n  rate: Rate;\n}\n\nexport interface CalculationHistory {\n  id: string;\n  timestamp: string;\n  result: CalculationResult;\n}\n\n// ============================================\n// Analytics Types\n// ============================================\n\nexport interface AnalyticsData {\n  totalRates: number;\n  avgRate: number;\n  totalRoutes: number;\n  ratesByPaymentType: Record<PaymentType, number>;\n  ratesByCurrency: Record<Currency, number>;\n  ratesByMonth: Array<{ month: string; count: number; avgRate: number }>;\n  topRoutes: Array<{ route: string; count: number }>;\n}\n\n// ============================================\n// UI Types\n// ============================================\n\nexport type ToastType = 'success' | 'error' | 'warning' | 'info';\n\nexport interface Toast {\n  id: string;\n  type: ToastType;\n  message: string;\n  duration?: number;\n}\n\nexport interface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title?: string;\n  children: React.ReactNode;\n}\n\nexport interface ConfirmDialogProps {\n  isOpen: boolean;\n  onConfirm: () => void;\n  onCancel: () => void;\n  title: string;\n  message: string;\n  confirmText?: string;\n  cancelText?: string;\n  variant?: 'danger' | 'warning' | 'info';\n}\n\n// ============================================\n// Sort & Filter Types\n// ============================================\n\nexport type SortField = 'date' | 'item' | 'rate' | 'route';\nexport type SortDirection = 'asc' | 'desc';\n\nexport interface SortConfig {\n  field: SortField;\n  direction: SortDirection;\n}\n\nexport interface FilterConfig {\n  searchTerm: string;\n  currency?: Currency;\n  paymentType?: PaymentType;\n  unit?: Unit;\n  dateRange?: {\n    start: string;\n    end: string;\n  };\n}\n\n// ============================================\n// Storage Types\n// ============================================\n\nexport interface AppSettings {\n  exchangeRate: number;\n  elpMarginPerKg: number;\n  beznalMarkup: number;\n  theme: 'light' | 'dark';\n  language: 'ru' | 'en';\n}\n\nexport interface ExportData {\n  version: string;\n  exportedAt: string;\n  rates: Rate[];\n  settings: AppSettings;\n}\n",
    "src/utils/index.ts": "import { format, parseISO, isValid } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport type {\n  Rate,\n  CalculationResult,\n  AnalyticsData,\n  ExportData,\n  AppSettings,\n  FilterConfig,\n  SortConfig\n} from '../types';\nimport { APP_VERSION, CURRENCY_OPTIONS } from '../constants';\n\n// ============================================\n// ID Generation\n// ============================================\n\nexport const generateId = (): string => {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n};\n\n// ============================================\n// Date Utilities\n// ============================================\n\nexport const formatDate = (dateStr: string, formatStr: string = 'd MMM yyyy'): string => {\n  try {\n    const date = parseISO(dateStr);\n    if (!isValid(date)) return dateStr;\n    return format(date, formatStr, { locale: ru });\n  } catch {\n    return dateStr;\n  }\n};\n\nexport const formatDateTime = (dateStr: string): string => {\n  return formatDate(dateStr, 'd MMM yyyy, HH:mm');\n};\n\nexport const getCurrentDate = (): string => {\n  return new Date().toISOString().split('T')[0];\n};\n\nexport const getCurrentTimestamp = (): string => {\n  return new Date().toISOString();\n};\n\n// ============================================\n// Currency Utilities\n// ============================================\n\nexport const getCurrencySymbol = (currency: string): string => {\n  return CURRENCY_OPTIONS.find(c => c.value === currency)?.symbol || currency;\n};\n\nexport const formatCurrency = (amount: number, currency: string): string => {\n  const symbol = getCurrencySymbol(currency);\n  return `${amount.toLocaleString('ru-RU', {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 2\n  })} ${symbol}`;\n};\n\nexport const formatRub = (amount: number): string => {\n  return `${Math.round(amount).toLocaleString('ru-RU')} ₽`;\n};\n\n// ============================================\n// Calculation Utilities\n// ============================================\n\nexport const calculateShipping = (\n  rate: Rate,\n  weight: number,\n  settings: AppSettings\n): CalculationResult => {\n  const { exchangeRate, elpMarginPerKg, beznalMarkup } = settings;\n\n  const base = rate.unit === 'фикс' ? rate.rate : rate.rate * weight;\n  const margin = elpMarginPerKg * weight;\n  const total = base + margin;\n  const beznal = total * beznalMarkup;\n  const rub = total * exchangeRate;\n\n  return {\n    base,\n    margin,\n    total,\n    beznal,\n    rub,\n    weight,\n    rate,\n  };\n};\n\n// ============================================\n// Filter & Sort Utilities\n// ============================================\n\nexport const filterRates = (rates: Rate[], filter: FilterConfig): Rate[] => {\n  return rates.filter(rate => {\n    // Text search\n    if (filter.searchTerm) {\n      const searchLower = filter.searchTerm.toLowerCase();\n      const matchesSearch =\n        rate.item.toLowerCase().includes(searchLower) ||\n        rate.route.toLowerCase().includes(searchLower) ||\n        rate.notes.toLowerCase().includes(searchLower);\n      if (!matchesSearch) return false;\n    }\n\n    // Currency filter\n    if (filter.currency && rate.currency !== filter.currency) {\n      return false;\n    }\n\n    // Payment type filter\n    if (filter.paymentType && rate.type !== filter.paymentType) {\n      return false;\n    }\n\n    // Unit filter\n    if (filter.unit && rate.unit !== filter.unit) {\n      return false;\n    }\n\n    // Date range filter\n    if (filter.dateRange) {\n      const rateDate = new Date(rate.date);\n      const startDate = new Date(filter.dateRange.start);\n      const endDate = new Date(filter.dateRange.end);\n      if (rateDate < startDate || rateDate > endDate) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n};\n\nexport const sortRates = (rates: Rate[], sort: SortConfig): Rate[] => {\n  return [...rates].sort((a, b) => {\n    let comparison = 0;\n\n    switch (sort.field) {\n      case 'date':\n        comparison = new Date(b.date).getTime() - new Date(a.date).getTime();\n        break;\n      case 'item':\n        comparison = a.item.localeCompare(b.item, 'ru');\n        break;\n      case 'rate':\n        comparison = a.rate - b.rate;\n        break;\n      case 'route':\n        comparison = a.route.localeCompare(b.route, 'ru');\n        break;\n    }\n\n    return sort.direction === 'desc' ? comparison : -comparison;\n  });\n};\n\n// ============================================\n// Analytics Utilities\n// ============================================\n\nexport const calculateAnalytics = (rates: Rate[]): AnalyticsData => {\n  if (rates.length === 0) {\n    return {\n      totalRates: 0,\n      avgRate: 0,\n      totalRoutes: 0,\n      ratesByPaymentType: { 'Нал': 0, 'Безнал': 0 },\n      ratesByCurrency: { 'EUR': 0, 'USD': 0 },\n      ratesByMonth: [],\n      topRoutes: [],\n    };\n  }\n\n  // Basic stats\n  const totalRates = rates.length;\n  const avgRate = rates.reduce((sum, r) => sum + r.rate, 0) / rates.length;\n\n  // Unique routes\n  const uniqueRoutes = new Set(rates.map(r => r.route));\n  const totalRoutes = uniqueRoutes.size;\n\n  // Payment type distribution\n  const ratesByPaymentType = rates.reduce((acc, r) => {\n    acc[r.type] = (acc[r.type] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>) as Record<'Нал' | 'Безнал', number>;\n\n  // Currency distribution\n  const ratesByCurrency = rates.reduce((acc, r) => {\n    acc[r.currency] = (acc[r.currency] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>) as Record<'EUR' | 'USD', number>;\n\n  // Monthly distribution\n  const monthlyData = rates.reduce((acc, r) => {\n    const month = r.date.substring(0, 7); // YYYY-MM\n    if (!acc[month]) {\n      acc[month] = { count: 0, totalRate: 0 };\n    }\n    acc[month].count++;\n    acc[month].totalRate += r.rate;\n    return acc;\n  }, {} as Record<string, { count: number; totalRate: number }>);\n\n  const ratesByMonth = Object.entries(monthlyData)\n    .map(([month, data]) => ({\n      month: formatDate(`${month}-01`, 'MMM yyyy'),\n      count: data.count,\n      avgRate: data.totalRate / data.count,\n    }))\n    .sort((a, b) => a.month.localeCompare(b.month));\n\n  // Top routes\n  const routeCounts = rates.reduce((acc, r) => {\n    acc[r.route] = (acc[r.route] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n\n  const topRoutes = Object.entries(routeCounts)\n    .map(([route, count]) => ({ route, count }))\n    .sort((a, b) => b.count - a.count)\n    .slice(0, 5);\n\n  return {\n    totalRates,\n    avgRate,\n    totalRoutes,\n    ratesByPaymentType,\n    ratesByCurrency,\n    ratesByMonth,\n    topRoutes,\n  };\n};\n\n// ============================================\n// Storage Utilities\n// ============================================\n\nexport const safeJSONParse = <T>(str: string, fallback: T): T => {\n  try {\n    return JSON.parse(str) as T;\n  } catch {\n    return fallback;\n  }\n};\n\nexport const safeLocalStorage = {\n  get: <T>(key: string, fallback: T): T => {\n    try {\n      const item = localStorage.getItem(key);\n      return item ? safeJSONParse(item, fallback) : fallback;\n    } catch {\n      return fallback;\n    }\n  },\n  set: <T>(key: string, value: T): boolean => {\n    try {\n      localStorage.setItem(key, JSON.stringify(value));\n      return true;\n    } catch {\n      return false;\n    }\n  },\n  remove: (key: string): boolean => {\n    try {\n      localStorage.removeItem(key);\n      return true;\n    } catch {\n      return false;\n    }\n  },\n};\n\n// ============================================\n// Export/Import Utilities\n// ============================================\n\nexport const exportToJSON = (rates: Rate[], settings: AppSettings): string => {\n  const exportData: ExportData = {\n    version: APP_VERSION,\n    exportedAt: getCurrentTimestamp(),\n    rates,\n    settings,\n  };\n  return JSON.stringify(exportData, null, 2);\n};\n\nexport const importFromJSON = (jsonString: string): ExportData | null => {\n  try {\n    const data = JSON.parse(jsonString) as ExportData;\n    if (!data.rates || !Array.isArray(data.rates)) {\n      throw new Error('Invalid data format');\n    }\n    return data;\n  } catch {\n    return null;\n  }\n};\n\nexport const downloadFile = (content: string, filename: string, type: string = 'application/json'): void => {\n  const blob = new Blob([content], { type });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = filename;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n};\n\nexport const exportToCSV = (rates: Rate[]): string => {\n  const headers = ['ID', 'Товар', 'Маршрут', 'Ставка', 'Ед.', 'Валюта', 'Тип', 'Примечания', 'Дата'];\n  const rows = rates.map(r => [\n    r.id,\n    `\"${r.item.replace(/\"/g, '\"\"')}\"`,\n    `\"${r.route.replace(/\"/g, '\"\"')}\"`,\n    r.rate.toString(),\n    r.unit,\n    r.currency,\n    r.type,\n    `\"${r.notes.replace(/\"/g, '\"\"')}\"`,\n    r.date,\n  ]);\n\n  return [headers.join(','), ...rows.map(row => row.join(','))].join('\\n');\n};\n\n// ============================================\n// Validation Utilities\n// ============================================\n\nexport const validateRate = (rate: Partial<Rate>): string[] => {\n  const errors: string[] = [];\n\n  if (!rate.item?.trim()) {\n    errors.push('Название товара обязательно');\n  }\n\n  if (rate.rate === undefined || rate.rate === null || isNaN(rate.rate)) {\n    errors.push('Укажите корректную ставку');\n  } else if (rate.rate < 0) {\n    errors.push('Ставка не может быть отрицательной');\n  }\n\n  return errors;\n};\n\n// ============================================\n// Debounce Utility\n// ============================================\n\nexport const debounce = <T extends (...args: Parameters<T>) => ReturnType<T>>(\n  func: T,\n  wait: number\n): ((...args: Parameters<T>) => void) => {\n  let timeoutId: ReturnType<typeof setTimeout> | null = null;\n\n  return (...args: Parameters<T>) => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => func(...args), wait);\n  };\n};\n\n// ============================================\n// Class Name Utility\n// ============================================\n\nexport const cn = (...classes: (string | boolean | undefined | null)[]): string => {\n  return classes.filter(Boolean).join(' ');\n};\n",
    "src/vite-env.d.ts": "/// <reference types=\"vite/client\" />\n",
    "tailwind.config.js": "/** @type {import('tailwindcss').Config} */\nexport default {\n  content: [\n    \"./index.html\",\n    \"./src/**/*.{js,ts,jsx,tsx}\",\n  ],\n  theme: {\n    extend: {\n      animation: {\n        'fade-in': 'fadeIn 0.2s ease-out',\n        'slide-up': 'slideUp 0.3s ease-out',\n        'slide-down': 'slideDown 0.3s ease-out',\n        'scale-in': 'scaleIn 0.2s ease-out',\n      },\n      keyframes: {\n        fadeIn: {\n          '0%': { opacity: '0' },\n          '100%': { opacity: '1' },\n        },\n        slideUp: {\n          '0%': { transform: 'translateY(10px)', opacity: '0' },\n          '100%': { transform: 'translateY(0)', opacity: '1' },\n        },\n        slideDown: {\n          '0%': { transform: 'translateY(-10px)', opacity: '0' },\n          '100%': { transform: 'translateY(0)', opacity: '1' },\n        },\n        scaleIn: {\n          '0%': { transform: 'scale(0.95)', opacity: '0' },\n          '100%': { transform: 'scale(1)', opacity: '1' },\n        },\n      },\n    },\n  },\n  plugins: [],\n};\n",
    "tsconfig.json": "{\n  \"compilerOptions\": {\n    \"target\": \"ES2020\",\n    \"useDefineForClassFields\": true,\n    \"lib\": [\"ES2020\", \"DOM\", \"DOM.Iterable\"],\n    \"module\": \"ESNext\",\n    \"skipLibCheck\": true,\n    \"moduleResolution\": \"bundler\",\n    \"allowImportingTsExtensions\": true,\n    \"resolveJsonModule\": true,\n    \"isolatedModules\": true,\n    \"noEmit\": true,\n    \"jsx\": \"react-jsx\",\n    \"strict\": true,\n    \"noUnusedLocals\": true,\n    \"noUnusedParameters\": true,\n    \"noFallthroughCasesInSwitch\": true,\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"@/*\": [\"src/*\"]\n    }\n  },\n  \"include\": [\"src\"],\n  \"references\": [{ \"path\": \"./tsconfig.node.json\" }]\n}\n",
    "tsconfig.node.json": "{\n  \"compilerOptions\": {\n    \"composite\": true,\n    \"skipLibCheck\": true,\n    \"module\": \"ESNext\",\n    \"moduleResolution\": \"bundler\",\n    \"allowSyntheticDefaultImports\": true\n  },\n  \"include\": [\"vite.config.ts\"]\n}\n",
    "vite.config.ts": "import { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\nimport path from 'path';\n\nexport default defineConfig({\n  plugins: [react()],\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n    },\n  },\n});\n"
  }
}